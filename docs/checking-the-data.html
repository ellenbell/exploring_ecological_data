<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Checking the data | Exploring Ecological Data</title>
  <meta name="description" content="A short introduction to exploring and analysing some ecological data" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Checking the data | Exploring Ecological Data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A short introduction to exploring and analysing some ecological data" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Checking the data | Exploring Ecological Data" />
  
  <meta name="twitter:description" content="A short introduction to exploring and analysing some ecological data" />
  

<meta name="author" content="Dr Ellen Bell" />


<meta name="date" content="2023-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="exploring-the-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploring Ecological Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#the-data-format"><i class="fa fa-check"></i><b>1.2</b> The data format</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#setting-up-your-project"><i class="fa fa-check"></i><b>1.3</b> Setting up your project</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#script-set-up"><i class="fa fa-check"></i><b>1.3.1</b> Script set up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="checking-the-data.html"><a href="checking-the-data.html"><i class="fa fa-check"></i><b>2</b> Checking the data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="checking-the-data.html"><a href="checking-the-data.html#make-sure-your-data-have-imported-correctly-and-are-easy-to-manipulate"><i class="fa fa-check"></i><b>2.1</b> Make sure your data have imported correctly and are easy to manipulate</a></li>
<li class="chapter" data-level="2.2" data-path="checking-the-data.html"><a href="checking-the-data.html#checking-for-errors"><i class="fa fa-check"></i><b>2.2</b> Checking for errors</a></li>
<li class="chapter" data-level="2.3" data-path="checking-the-data.html"><a href="checking-the-data.html#tidying-up"><i class="fa fa-check"></i><b>2.3</b> Tidying up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-the-data.html"><a href="exploring-the-data.html"><i class="fa fa-check"></i><b>3</b> Exploring the data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-the-data.html"><a href="exploring-the-data.html#plotting-abundance-through-time-and-space"><i class="fa fa-check"></i><b>3.1</b> Plotting abundance through time and space</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-the-data.html"><a href="exploring-the-data.html#comparing-habitat-and-land-management-strategy-impacts-on-abundance"><i class="fa fa-check"></i><b>3.2</b> Comparing habitat and land management strategy impacts on abundance</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-the-data.html"><a href="exploring-the-data.html#bonus-challenge"><i class="fa fa-check"></i><b>3.3</b> Bonus Challenge</a></li>
<li class="chapter" data-level="3.4" data-path="exploring-the-data.html"><a href="exploring-the-data.html#discussion"><i class="fa fa-check"></i><b>3.4</b> Discussion</a></li>
<li class="chapter" data-level="3.5" data-path="exploring-the-data.html"><a href="exploring-the-data.html#before-you-leave"><i class="fa fa-check"></i><b>3.5</b> Before you leave</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>4</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring Ecological Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="checking-the-data" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Checking the data<a href="checking-the-data.html#checking-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Once you have imported and loaded your <code>vertebrates</code> dataset into your new R project you will need to spend a few minutes checking it over to make sure that R has correctly identified and formatted your variables.</p>
<div id="make-sure-your-data-have-imported-correctly-and-are-easy-to-manipulate" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Make sure your data have imported correctly and are easy to manipulate<a href="checking-the-data.html#make-sure-your-data-have-imported-correctly-and-are-easy-to-manipulate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>First of all make sure your data have imported correctly, do you have the expected numbers of rows and columns?</li>
</ol>
<blockquote>
<p>Hint - consider using functions such as <code>ncol(), nrow(), colnames()</code> to check this.</p>
</blockquote>
<ol start="2" style="list-style-type: decimal">
<li>Then check that R has correctly identified the data types for each variable. Do you need to adjust any variables to factors?</li>
</ol>
<blockquote>
<p>Hint - consider using functions such as <code>glimpse()</code> to check.</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Now you can check your variable names, are they nice and concise, do you want to change them?</li>
</ol>
<blockquote>
<p>Hint - you can use the <code>rename()</code> function to change variable names if you wish to.</p>
</blockquote>
</div>
<div id="checking-for-errors" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Checking for errors<a href="checking-the-data.html#checking-for-errors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now we know our that R has read our data correctly and we have all of our variables named as we would like we can run a few further checks. Frequently you will find that your data have originally been manually entered into a spreadsheet, maybe from hand drafted notes in a field or lab notebook. Every time something is copied there is the opportunity for error. Maybe a row has been accidentally duplicated, or there is a typo or maybe some data is missed out altogether. There are a few tricks we can use to check for each of these and to make sure we are confident in the fidelity of our dataset.</p>
<ol style="list-style-type: decimal">
<li>Checking for duplicates - When you are manually entering data into a spreadsheet, it is very easy to accidentally enter the same row twice. With very large data sets this is something that is very hard to pick out by eye. Thankfully R has some very useful functions to check for this. Try running;</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="checking-the-data.html#cb2-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="checking-the-data.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="co"># check for duplicated rows</span></span></code></pre></div>
<blockquote>
<p>Note that %&gt;% used here is just another notation for piping, rather like the + that ggplot uses. This means that the output from one function is fed directly into the next function.</p>
</blockquote>
<p>This chunk of code will spit out a long list of TRUE (row is duplicated) or FALSE (row is not duplicated) statements. Again not very human readable, especially if we have a very large data set. Try amending the code to;</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="checking-the-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="checking-the-data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">%&gt;%</span> <span class="co"># check for duplicated rows</span></span>
<span id="cb3-3"><a href="checking-the-data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="co"># Sums any TRUE statements in the list </span></span></code></pre></div>
<p>Do we have any duplicated rows?</p>
<ol start="2" style="list-style-type: decimal">
<li>Checking for typos - As with duplicates it is very easy to enter a typo when manually entering data into a spreadsheet. Generally if you have been collecting continuous data you will have an idea of what a sensible upper and lower bound within your data set should be. We can use the <code>summarise()</code> function to see what these are within this data set, as shown below;</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="checking-the-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="checking-the-data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="checking-the-data.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(length_1_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="co"># reports the minimum value in the length_1_mm variable and ignores cells with N/A</span></span>
<span id="cb4-4"><a href="checking-the-data.html#cb4-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(length_1_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="co"># reports the maximum value in the length_1_mm variable and ignores cells with N/A</span></span></code></pre></div>
<p>Try manipulating the above chunk to report the upper and lower bounds for the weight variable in your data set. Do these values all look reasonable to you?</p>
<p>But how can we check for typos in categorical data? We can use the <code>distinct()</code> function to identify all of the options stored under a categorical variable name. Try using the following chunk;</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="checking-the-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="checking-the-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(species) <span class="co"># reports the categories stored under species</span></span></code></pre></div>
<p>So do you think there are any potential typos in your data set? Are there any further categorical variables you may wish to check?</p>
<ol start="3" style="list-style-type: decimal">
<li>Checking for missing data - finally sometimes when entering data manually, you may miss or delete a spreadsheet cell by mistake, leaving it empty. Again this is really difficult to spot by eye in a large data set. Try running the following chunk of code, can you work out what each line does? Try adding comments to it in your script yourself.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="checking-the-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="checking-the-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="checking-the-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code></pre></div>
<details>
<summary>
<strong>Click-me to check your code interpretation</strong>
</summary>
<p>So here you are piping your initial data set <code>vertebrates</code> into the <code>is.na()</code> function which is then looking for cells containing N/A and reporting a TRUE/FALSE data frame (where TRUE indicates N/A). We are then piping that output straight into the <code>sum()</code> function which is summing the number of TRUE values.</p>
</details>
<p><br />
Do we have any missing data? Do you think its reasonable that there may be some missing data? You can investigate individual variables using;</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="checking-the-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(vertebrates<span class="sc">$</span>species))</span></code></pre></div>
</div>
<div id="tidying-up" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Tidying up<a href="checking-the-data.html#tidying-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So from the previous exercises that the data set contains four categories in the <code>species</code> variable; two species of salamander, one species of trout and some NA’s. It would be good to know what the representation is of each of these groups in this data set.</p>
<p>Try running the following;</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="checking-the-data.html#cb8-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="checking-the-data.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="checking-the-data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<p>What do you think this piece of code has done? From this information, do you think it may be worth removing some categories from the data set?</p>
<details>
<summary>
<strong>Click-me to check your analysis</strong>
</summary>
<p>We can see that three species in this data set and a category that are unidentified (NA). The Cascade torrent salamander has only 15 data entries and 3 entries have an unknown species (NA), compared to thousands of entries for the other species. It therefore makes good analytical sense to remove those entries. Try using the following to filter them out, for now.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="checking-the-data.html#cb9-1" aria-hidden="true" tabindex="-1"></a>vertebrates <span class="ot">&lt;-</span> vertebrates <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="checking-the-data.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">!=</span> <span class="st">&quot;Cascade torrent salamander&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="checking-the-data.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>)</span></code></pre></div>
You can check this worked by running the last piece of code again.
</details>
<p><br /></p>
<p>Now we are ready to start exploring the data set from an ecological point of view.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploring-the-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-clean_and_tidy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["exploring_ecological_data.pdf", "exploring_ecological_data.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
